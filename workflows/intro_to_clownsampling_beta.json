{"last_node_id":764,"last_link_id":1991,"nodes":[{"id":453,"type":"VAEDecode","pos":[-303.0476379394531,3073.681640625],"size":[210,46],"flags":{"collapsed":false},"order":132,"mode":0,"inputs":[{"name":"samples","localized_name":"samples","type":"LATENT","link":1923},{"name":"vae","localized_name":"vae","type":"VAE","link":1940,"slot_index":1}],"outputs":[{"name":"IMAGE","localized_name":"IMAGE","type":"IMAGE","shape":3,"links":[1365],"slot_index":0}],"properties":{"Node name for S&R":"VAEDecode"},"widgets_values":[]},{"id":606,"type":"LoraLoader","pos":[-2194.87353515625,3180.94482421875],"size":[359.7619323730469,126],"flags":{},"order":111,"mode":0,"inputs":[{"name":"model","localized_name":"model","type":"MODEL","link":1890},{"name":"clip","localized_name":"clip","type":"CLIP","link":1939}],"outputs":[{"name":"MODEL","localized_name":"MODEL","type":"MODEL","links":[1904],"slot_index":0},{"name":"CLIP","localized_name":"CLIP","type":"CLIP","links":[1937,1938],"slot_index":1}],"properties":{"Node name for S&R":"LoraLoader"},"widgets_values":["csbw_cascade_dark_ema.safetensors",1,1]},{"id":454,"type":"SaveImage","pos":[-303.3555603027344,3184.454345703125],"size":[753.4503784179688,734.7869262695312],"flags":{},"order":133,"mode":0,"inputs":[{"name":"images","localized_name":"images","type":"IMAGE","link":1365}],"outputs":[],"properties":{},"widgets_values":["ComfyUI"]},{"id":625,"type":"SharkOptions_UltraCascade_Latent_Beta","pos":[-648.0692138671875,3944.1982421875],"size":[310.79998779296875,82],"flags":{},"order":0,"mode":0,"inputs":[{"name":"options","localized_name":"options","type":"OPTIONS","shape":7,"link":null}],"outputs":[{"name":"options","localized_name":"options","type":"OPTIONS","links":[1948],"slot_index":0}],"properties":{"Node name for S&R":"SharkOptions_UltraCascade_Latent_Beta"},"widgets_values":[1536,1536]},{"id":626,"type":"SharkOptions_UltraCascade_Latent_Beta","pos":[-1372.7569580078125,3947.591064453125],"size":[310.79998779296875,82],"flags":{},"order":1,"mode":0,"inputs":[{"name":"options","localized_name":"options","type":"OPTIONS","shape":7,"link":null}],"outputs":[{"name":"options","localized_name":"options","type":"OPTIONS","links":[1951],"slot_index":0}],"properties":{"Node name for S&R":"SharkOptions_UltraCascade_Latent_Beta"},"widgets_values":[24,24]},{"id":624,"type":"SharkOptions_UltraCascade_Latent_Beta","pos":[-1013.2625732421875,3947.5908203125],"size":[310.79998779296875,82],"flags":{},"order":2,"mode":0,"inputs":[{"name":"options","localized_name":"options","type":"OPTIONS","shape":7,"link":null}],"outputs":[{"name":"options","localized_name":"options","type":"OPTIONS","links":[1947],"slot_index":0}],"properties":{"Node name for S&R":"SharkOptions_UltraCascade_Latent_Beta"},"widgets_values":[36,36]},{"id":609,"type":"UNETLoader","pos":[-1020.5138549804688,3045.097412109375],"size":[356.544677734375,82],"flags":{},"order":3,"mode":0,"inputs":[],"outputs":[{"name":"MODEL","localized_name":"MODEL","type":"MODEL","links":[1926],"slot_index":0}],"properties":{"Node name for S&R":"UNETLoader"},"widgets_values":["stage_b_lite_CSBW_v1.1.safetensors","default"]},{"id":621,"type":"VAELoader","pos":[-637.3134765625,3068.5341796875],"size":[294.6280212402344,58],"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[{"name":"VAE","localized_name":"VAE","type":"VAE","links":[1940],"slot_index":0}],"properties":{"Node name for S&R":"VAELoader"},"widgets_values":["stage_a_ft_hq.safetensors"]},{"id":620,"type":"CLIPLoader","pos":[-2564.87353515625,3272.8349609375],"size":[344.635498046875,98],"flags":{},"order":5,"mode":0,"inputs":[],"outputs":[{"name":"CLIP","localized_name":"CLIP","type":"CLIP","links":[1939],"slot_index":0}],"properties":{"Node name for S&R":"CLIPLoader"},"widgets_values":["cascade_text_encoder.safetensors","stable_cascade","default"]},{"id":627,"type":"Note","pos":[-1381.849365234375,4086.07421875],"size":[331.63720703125,415.29815673828125],"flags":{},"order":6,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Stage C: the original Stable Cascade version. \n\nStable Cascade latents are actually quite small: typically, a 1024x1024 image will be generated from a stage C latent that is only 24x24 (for comparison, with SDXL or SD1.5, the dimensions are 128x128). \n\n\"Compression\" is just a shorthand method of determining these dimensions, such as 24x24 (1024 / 42 = 24.38, which means a \"compression\" of 42).\n\nThis poses a problem though: Cascade was only trained on a handful of resolutions. The difference between 24x24 and 25x25 is a significant drop in quality and coherence. Therefore, it is best to just set these dimensions directly.\n\nThe best trained resolutions are:\n\n24x24 > 32x32\n30x16 > 40x24 \n\n48x24 also works, but seems to result in more doubling problems than the others.\n\n\n"],"color":"#432","bgcolor":"#653"},{"id":628,"type":"Note","pos":[-1012.45947265625,4084.7783203125],"size":[331.63720703125,415.29815673828125],"flags":{},"order":7,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Stage UP: a patched version of Stable Cascade stage C (\"UltraPixel\"). \n\nThe key with these dimensions is to keep the aspect ratio the same as the stage C latent. Typically, best results are with a 1.5x upscale. 2.0x works, but will result in somewhat more issues with doubling, and can be a lot slower. However, the detail level will also be very high.\n\nSome viable resolutions are listed below. Asterisks signify ones that have been verified to work particularly well.\n\n32x32\n36x36 **\n40x40\n42x42\n48x48 *\n\n40x24\n50x30\n60x36 **\n70x42\n80x48 *\n\n72x36 \n80x40 *\n96x48 (very slow!)\n\n\n\n"],"color":"#432","bgcolor":"#653"},{"id":632,"type":"CheckpointLoaderSimple","pos":[-1073.474609375,2726.673583984375],"size":[452.7829895019531,102.89583587646484],"flags":{},"order":8,"mode":0,"inputs":[],"outputs":[{"name":"MODEL","localized_name":"MODEL","type":"MODEL","links":null},{"name":"CLIP","localized_name":"CLIP","type":"CLIP","links":null},{"name":"VAE","localized_name":"VAE","type":"VAE","links":null}],"properties":{"Node name for S&R":"CheckpointLoaderSimple"},"widgets_values":["cascade_B-lite_refined_CSBW_v1.1.safetensors"]},{"id":633,"type":"Note","pos":[-1075.468994140625,2892.701416015625],"size":[457.5304870605469,94.27093505859375],"flags":{},"order":9,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["This is the stage B lite CSBW finetune (model only).\n\nhttps://huggingface.co/ClownsharkBatwing/Cascade_Stage_B_CSBW_Refined/blob/main/stage_b_lite_CSBW_v1.1.safetensors"],"color":"#432","bgcolor":"#653"},{"id":634,"type":"Note","pos":[-575.989501953125,2895.603271484375],"size":[547.0546875,91.47331237792969],"flags":{},"order":10,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["This is a finetune of stage A. You will get a sharper image, but in images with large white areas, small circular grey halos are sometimes visible.\n\nhttps://huggingface.co/madebyollin/stage-a-ft-hq/blob/main/stage_a_ft_hq.safetensors"],"color":"#432","bgcolor":"#653"},{"id":630,"type":"Note","pos":[-3309.3076171875,3048.958984375],"size":[717.709228515625,165.61032104492188],"flags":{},"order":11,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["I recommend the BF16 version of stage C. There is no visible difference vs. the full precision weights, and it halves the disk space requirements.\n\nhttps://huggingface.co/stabilityai/stable-cascade/blob/main/stage_c_bf16.safetensors\n\nIMPORTANT: The original UltraPixel \"safetensors\" is not a safetensors at all - it is a PICKLE, where they lazily (at best) changed the file extension to \".safetensors\"!\n\nI converted it to a real safetensors file, and it's available below:\n\nhttps://huggingface.co/ClownsharkBatwing/ultrapixel_convert/blob/main/ultrapixel_t2i.safetensors"],"color":"#432","bgcolor":"#653"},{"id":584,"type":"UltraCascade_Loader","pos":[-2564.4580078125,3133.043212890625],"size":[345.5117492675781,82.95540618896484],"flags":{},"order":12,"mode":0,"inputs":[],"outputs":[{"name":"MODEL","localized_name":"MODEL","type":"MODEL","shape":3,"links":[1890],"slot_index":0}],"properties":{"Node name for S&R":"UltraCascade_Loader"},"widgets_values":["stage_c_bf16.safetensors","ultrapixel_t2i.safetensors"]},{"id":635,"type":"Note","pos":[-3307.105712890625,3272.173095703125],"size":[715.61083984375,89.37511444091797],"flags":{},"order":13,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Any clip G will do. The Cascade version is available at:\n\nhttps://huggingface.co/stabilityai/stable-cascade/blob/main/text_encoder/model.bf16.safetensors\n\n"],"color":"#432","bgcolor":"#653"},{"id":636,"type":"Note","pos":[-3306.760009765625,3418.6708984375],"size":[715.61083984375,113.57872772216797],"flags":{},"order":14,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["The LORA was trained with OneTrainer (https://github.com/Nerogar/OneTrainer) on some of my own SDXL generations. It has deep colors and is strong with wacky paint, illustration, and vector art styles. \n\nCascade learns extremely quickly and is very adept with artistic styles (it knows many artist names).\n\nhttps://huggingface.co/ClownsharkBatwing/CSBW_Style/blob/main/csbw_cascade_dark_ema.safetensors\n"],"color":"#432","bgcolor":"#653"},{"id":629,"type":"Note","pos":[-647.965087890625,4084.8818359375],"size":[331.63720703125,415.29815673828125],"flags":{},"order":15,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Stage B: the Stable Cascade superresolution model.\n\nAs with stage UP, the key with these dimensions is to keep the aspect ratio the same as the prior latents. Theoretically, any resolution may be used, though some odd distortions can occur when the ideal upscale ratio is not used. It's not entirely clear what those ratios are, so some experimentation may be necessary. \n\nSome resolutions that work particularly well are:\n\n1536x1536 *\n2048x2048 *\n\n1600x960\n2560x1536 **\n2880x1792 *\n3200x1920\n\nIf you use stage B lite, you can hit 4k resolutions without even using more than 12GB of VRAM.\n\nIt's highly recommended to use the CSBW finetune of stage B, as it fixes many of the severe artifact problems the original release had.\n\nNote: CFG is not needed for this stage!"],"color":"#432","bgcolor":"#653"},{"id":637,"type":"Note","pos":[-1838.5732421875,2922.63671875],"size":[457.5304870605469,94.27093505859375],"flags":{},"order":16,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Perturbed attention guidance (PAG) makes an enormous difference with Stable Cascade stages C and UP. Like CFG, it will double the runtime."],"color":"#432","bgcolor":"#653"},{"id":598,"type":"CLIPTextEncode","pos":[-1811.0350341796875,3205.474853515625],"size":[351.592529296875,173.00360107421875],"flags":{},"order":123,"mode":0,"inputs":[{"name":"clip","localized_name":"clip","type":"CLIP","link":1937}],"outputs":[{"name":"CONDITIONING","localized_name":"CONDITIONING","type":"CONDITIONING","links":[1907,1911,1914],"slot_index":0}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["impasto oil painting by Yayoi Kusama and Lisa Frank, thick paint textures, tunning contrasts at  night with stylish roughly drawn thick black lines, a nuclear explosion destroying a city, its towering wide glowing nuclear mushroom cloud enveloping the entire skyline, the nuclear fireball lighting up the dark sky"]},{"id":601,"type":"UltraCascade_PerturbedAttentionGuidance","pos":[-1808.5911865234375,3084.306884765625],"size":[344.3999938964844,58],"flags":{},"order":122,"mode":0,"inputs":[{"name":"model","localized_name":"model","type":"MODEL","link":1904}],"outputs":[{"name":"MODEL","localized_name":"MODEL","type":"MODEL","links":[1909,1910],"slot_index":0}],"properties":{"Node name for S&R":"UltraCascade_PerturbedAttentionGuidance"},"widgets_values":[3]},{"id":599,"type":"CLIPTextEncode","pos":[-1814.4205322265625,3435.57763671875],"size":[356.2470703125,110.6326904296875],"flags":{},"order":124,"mode":0,"inputs":[{"name":"clip","localized_name":"clip","type":"CLIP","link":1938}],"outputs":[{"name":"CONDITIONING","localized_name":"CONDITIONING","type":"CONDITIONING","links":[1908,1912,1915],"slot_index":0}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["low quality, bad quality, low detail, blurry, unsharp"]},{"id":631,"type":"Note","pos":[-1557.671142578125,2725.4599609375],"size":[457.5304870605469,94.27093505859375],"flags":{},"order":17,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["This is a checkpoint that, for convenience, includes the stage B lite CSBW finetune, clip G, and stage A (the FT_HQ finetune).\n\nhttps://huggingface.co/ClownsharkBatwing/CSBW_Style/blob/main/cascade_B-lite_refined_CSBW_v1.1.safetensors"],"color":"#432","bgcolor":"#653"},{"id":649,"type":"Note","pos":[2011.257080078125,3860],"size":[282.2704772949219,88],"flags":{},"order":18,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Since \"steps_to_run\" is set to -1,\nthis will run all remaining steps."],"color":"#432","bgcolor":"#653"},{"id":648,"type":"Note","pos":[1661.257080078125,3860],"size":[283.8087463378906,88],"flags":{},"order":19,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Runs the next 10 steps (out of 30)."],"color":"#432","bgcolor":"#653"},{"id":661,"type":"ClownOptions_SDE_Beta","pos":[3419.448486328125,3372.827880859375],"size":[315,266],"flags":{},"order":20,"mode":0,"inputs":[{"name":"etas","localized_name":"etas","type":"SIGMAS","shape":7,"link":null},{"name":"etas_substep","localized_name":"etas_substep","type":"SIGMAS","shape":7,"link":null},{"name":"options","localized_name":"options","type":"OPTIONS","shape":7,"link":null}],"outputs":[{"name":"options","localized_name":"options","type":"OPTIONS","links":[1963],"slot_index":0}],"properties":{"Node name for S&R":"ClownOptions_SDE_Beta"},"widgets_values":["gaussian","gaussian","hard","hard",0.5,0.5,-1,"randomize"]},{"id":666,"type":"SharkOptions_Beta","pos":[3408.929443359375,2924.583984375],"size":[315,130],"flags":{},"order":21,"mode":0,"inputs":[{"name":"options","localized_name":"options","type":"OPTIONS","shape":7,"link":null}],"outputs":[{"name":"options","localized_name":"options","type":"OPTIONS","links":[1962]}],"properties":{"Node name for S&R":"SharkOptions_Beta"},"widgets_values":["gaussian",1,1,false]},{"id":668,"type":"Note","pos":[2901.467041015625,2764.762939453125],"size":[476.7748718261719,425.3497314453125],"flags":{},"order":22,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["SharkOptions controls the initial noise generated before starting the sampling process. \n\nNOISE TYPES:\n\nPerlin is great with Stable Cascade, and with Flux will frequently result in a less blurred image (and a somewhat less saturated look, which can be helpful for realism).\n\nThe \"color\" noise modes have more low frequency information (structure), brown being greater than pink. White is neutral, while blue and especially violet have extra high frequency information (details).\n\nhires-pyramid-bicubic can generate exceptionally sharp images in many cases. The other pyramid noise types, and studentt, are often great for painterly styles.\n\nOTHER OPTIONS:\n\n\"noise_stdev\" increases the \"size\" of the noise. Values around 1.05 to 1.1 can have a wonderful effect with some painterly styles, with a boost in saturation.\n\n\"denoise_alt\" overrides the denoise setting. It has a very different effect that can often be easier to control when doing img2img generations with rectified flow models. (It scales the sigmas schedule, instead of slicing it).\n\n\"channelwise_cfg\" changes the cfg method used to one that can be very good with models that use a 16 channel VAE (SD3.5, Flux). Setting a negative value in the \"cfg\" box in any ClownsharKSampler or SharkSampler node is equivalent to using this toggle (for example, cfg = -2.0 is the same as setting cfg = 2.0, and channelwise_cfg = true)."],"color":"#432","bgcolor":"#653"},{"id":669,"type":"Note","pos":[2896.13427734375,3250.095458984375],"size":[480.2942199707031,427.3802795410156],"flags":{},"order":23,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["ClownOptions_SDE controls the noise that is added after each step (or substep).\n\nNOISE TYPES:\n\nBrownian can give very good results, and is the \"correct\" noise type to use from a mathematical perspective. It does, however, result in a burned image with BONGMath when using many of the higher order samplers (the issue is with \"non-monotonic\" ones, which are typically those \n whose names end with \"5s\" or greater).\n\nNOISE MODES:\n\nThe \"noise mode\" controls how much noise is actually used after each step. The list is roughly sorted in order of strength (hard at the top being the strongest, hard_var at the bottom being the weakest - and the only one that uses \"mathematically correct\" scaling). \n\n\"Sinusoidal\" begins very weak, then becomes strong in the middle of the sampling process before losing strength again.\n\nThe \"soft\" noise types begin very strong, and drop off extremely rapidly.\n\nSUBSTEPS:\n\nAny sampler that is not euler or ddim uses information from multiple model calls (\"stages\") to predict the step. Multistep samplers reuse previous steps as \"stages\", whereas the rest make new model calls. \n\nThe settings for \"substep\" control these intermediate \"substeps\". If eta_substep is set to 0, BONGMath will have no effect."],"color":"#432","bgcolor":"#653"},{"id":677,"type":"Note","pos":[2900.990478515625,4137.615234375],"size":[470.2156677246094,168.35081481933594],"flags":{},"order":24,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Overshoot > 0 causes the sampler to \"overshoot\" the step size, and then scale backwards to where it was really supposed to end. This is what all other SDE and ancestral sampler implementations do, though I have found it to adversely affect accuracy, especially with high eta values (> 0.7).\n\nIt can be used to soften images and deepen colors in some cases. \n\nTo mimic the behavior of the typical SDE and ancestral sampler implementations, set these settings to match those in ClownOptions_SDE."],"color":"#432","bgcolor":"#653"},{"id":672,"type":"Note","pos":[2898.130859375,4368.2470703125],"size":[481.24298095703125,275.938720703125],"flags":{},"order":25,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Implicit steps refine the sampling process by feeding the output of each step back into its input and rerunning it. This means setting either to \"1\" will increase the runtime 2x, as you're doubling the number of steps. \n\nThey can drastically increase quality. In some cases, results can actually be improved by cutting the step count in half, and running with implicit_steps=1 or implicit_substeps=1 (which results in an equivalent runtime).\n\nWith the other samplers, rebound will add one extra model call per step. \n\nBongmath and predictor-corrector can have significantly different effects. Rebound can as well (but also adds 1 model call per implicit step or substep).\n\nTRUE IMPLICIT SAMPLERS:\n\nIt is recommended to use \"implicit_steps\" with the \"fully_implicit\" samplers, and \"implicit_substeps\" with the \"diag_implicit\" samplers. Both of these sampler types will ignore the \"implicit_type\" settings.\n"],"color":"#432","bgcolor":"#653"},{"id":673,"type":"Note","pos":[2902.2275390625,4724.1513671875],"size":[476.20684814453125,190.63368225097656],"flags":{},"order":26,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["This option node can be very useful for SAVING TIME! \n\n\"swap_below_error\" is a tolerance threshold where, if the total error at each step falls below the value in the box, it will switch to the sampler specified here.\n\n\"log_err_to_console\" will print these values at each step to the terminal/console/cmd.exe window where ComfyUI is running. This is essential if you wish to choose a reasonable value for \"swap_below_err\".\n\n\"swap_at_step\" will switch after the step specified, no matter what. This is equivalent to chaining two samplers together as shown to the left - it's just more convenient and compact.\n"],"color":"#432","bgcolor":"#653"},{"id":665,"type":"ClownOptions_SwapSampler_Beta","pos":[3421.203125,4755.17529296875],"size":[310.0069580078125,130],"flags":{},"order":27,"mode":0,"inputs":[{"name":"options","localized_name":"options","type":"OPTIONS","shape":7,"link":null}],"outputs":[{"name":"options","localized_name":"options","type":"OPTIONS","links":[1972],"slot_index":0}],"properties":{"Node name for S&R":"ClownOptions_SwapSampler_Beta"},"widgets_values":["multistep/res_2m",0,30,false]},{"id":662,"type":"ClownOptions_ImplicitSteps_Beta","pos":[3424.5830078125,4438.4873046875],"size":[309.8185119628906,130.76943969726562],"flags":{},"order":28,"mode":0,"inputs":[{"name":"options","localized_name":"options","type":"OPTIONS","shape":7,"link":null}],"outputs":[{"name":"options","localized_name":"options","type":"OPTIONS","links":[1971],"slot_index":0}],"properties":{"Node name for S&R":"ClownOptions_ImplicitSteps_Beta"},"widgets_values":["bongmath","bongmath",0,0]},{"id":657,"type":"ClownsharKSampler_Beta","pos":[1740,3090],"size":[296.93646240234375,418],"flags":{},"order":29,"mode":0,"inputs":[{"name":"model","localized_name":"model","type":"MODEL","shape":7,"link":null},{"name":"positive","localized_name":"positive","type":"CONDITIONING","shape":7,"link":null},{"name":"negative","localized_name":"negative","type":"CONDITIONING","shape":7,"link":null},{"name":"latent_image","localized_name":"latent_image","type":"LATENT","shape":7,"link":null},{"name":"sigmas","localized_name":"sigmas","type":"SIGMAS","shape":7,"link":null},{"name":"guides","localized_name":"guides","type":"GUIDES","shape":7,"link":null},{"name":"options","localized_name":"options","type":"OPTIONS","shape":7,"link":null}],"outputs":[{"name":"output","localized_name":"output","type":"LATENT","links":[],"slot_index":0},{"name":"denoised","localized_name":"denoised","type":"LATENT","links":null},{"name":"options","localized_name":"options","type":"OPTIONS","links":null}],"properties":{"Node name for S&R":"ClownsharKSampler_Beta"},"widgets_values":[0.5,"exponential/res_3s","beta57",30,-1,1,5.5,0,"fixed","standard",true]},{"id":680,"type":"ClownSampler_Beta","pos":[1080,3090],"size":[283.6876220703125,174],"flags":{},"order":30,"mode":0,"inputs":[{"name":"guides","localized_name":"guides","type":"GUIDES","shape":7,"link":null},{"name":"options","localized_name":"options","type":"OPTIONS","shape":7,"link":null}],"outputs":[{"name":"sampler","localized_name":"sampler","type":"SAMPLER","links":[1973]}],"properties":{"Node name for S&R":"ClownSampler_Beta"},"widgets_values":[0.5,"exponential/res_3s",-1,"fixed",true]},{"id":679,"type":"SharkSampler_Beta","pos":[1400,3090],"size":[285.713623046875,346],"flags":{},"order":112,"mode":0,"inputs":[{"name":"model","localized_name":"model","type":"MODEL","shape":7,"link":null},{"name":"positive","localized_name":"positive","type":"CONDITIONING","shape":7,"link":null},{"name":"negative","localized_name":"negative","type":"CONDITIONING","shape":7,"link":null},{"name":"sampler","localized_name":"sampler","type":"SAMPLER","shape":7,"link":1973},{"name":"sigmas","localized_name":"sigmas","type":"SIGMAS","shape":7,"link":null},{"name":"latent_image","localized_name":"latent_image","type":"LATENT","shape":7,"link":null},{"name":"options","localized_name":"options","type":"OPTIONS","shape":7,"link":null}],"outputs":[{"name":"output","localized_name":"output","type":"LATENT","links":null},{"name":"denoised","localized_name":"denoised","type":"LATENT","links":null},{"name":"options","localized_name":"options","type":"OPTIONS","links":null}],"properties":{"Node name for S&R":"SharkSampler_Beta"},"widgets_values":["beta57",30,-1,1,5.5,0,"fixed","standard"]},{"id":682,"type":"ClownOptions_Automation_Beta","pos":[3431.6982421875,5061.78564453125],"size":[295.4560546875,146],"flags":{},"order":113,"mode":0,"inputs":[{"name":"etas","localized_name":"etas","type":"SIGMAS","shape":7,"link":1975},{"name":"etas_substep","localized_name":"etas_substep","type":"SIGMAS","shape":7,"link":null},{"name":"s_noises","localized_name":"s_noises","type":"SIGMAS","shape":7,"link":null},{"name":"s_noises_substep","localized_name":"s_noises_substep","type":"SIGMAS","shape":7,"link":null},{"name":"epsilon_scales","localized_name":"epsilon_scales","type":"SIGMAS","shape":7,"link":null},{"name":"frame_weights","localized_name":"frame_weights","type":"SIGMAS","shape":7,"link":null},{"name":"options","localized_name":"options","type":"OPTIONS","shape":7,"link":null}],"outputs":[{"name":"options","localized_name":"options","type":"OPTIONS","links":[1974]}],"properties":{"Node name for S&R":"ClownOptions_Automation_Beta"},"widgets_values":[]},{"id":683,"type":"Note","pos":[2900.06005859375,5035.3271484375],"size":[480.3033752441406,342.18597412109375],"flags":{},"order":31,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["RES4LYF heavily emphasizes giving you control over the sampling process!\n\nYou will often see these green \"sigmas\" inputs that aren't really for sigmas. These are used to control parameters on a step-by-step basis. \n\nIMPORTANT: The values used in the input here are multiplied by the value in ClownSampler/SharkSampler/ClownsharKSampler!\n\nFor example, the KarrasSchedule connected below creates a list of numbers:\n\n1.0, 1.0, 1.0, 1.0, 1.0\n\n(The rest is automatically filled in with 0.0.)\n\nThese are then multiplied by the value for \"eta\" (0.5) in the connected ClownsharKSampler node:\n\n0.5, 0.5, 0.5, 0.5, 0.5\n\nThe result is the sampler sets \"eta\" to 0.5 for the first 5 steps, and then 0.0 for every step after that. \n\nTry connecting something like the BetaScheduler while using \"beta57\" as your sampling scheduler!"],"color":"#432","bgcolor":"#653"},{"id":685,"type":"Note","pos":[3439.888916015625,5283.99462890625],"size":[280.6243896484375,109.73818969726562],"flags":{},"order":32,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["NOTE: \"epsilon_scales\" is currently unused, but exists as a placeholder. \n\n\"frame_weights\" is for video models such as Hunyuan. This is for use with guides."],"color":"#432","bgcolor":"#653"},{"id":686,"type":"SigmasPreview","pos":[3438.864501953125,5449.8837890625],"size":[315,270],"flags":{},"order":114,"mode":0,"inputs":[{"name":"sigmas","localized_name":"sigmas","type":"SIGMAS","link":1976}],"outputs":[],"properties":{"Node name for S&R":"SigmasPreview"},"widgets_values":[false]},{"id":684,"type":"KarrasScheduler","pos":[3200.272216796875,5449.88232421875],"size":[210,130],"flags":{},"order":33,"mode":0,"inputs":[],"outputs":[{"name":"SIGMAS","localized_name":"SIGMAS","type":"SIGMAS","links":[1975,1976],"slot_index":0}],"properties":{"Node name for S&R":"KarrasScheduler"},"widgets_values":[5,1,1,1]},{"id":697,"type":"Note","pos":[5630,2820],"size":[405.5904235839844,116.80461120605469],"flags":{},"order":34,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["ModelSamplingAdvanced many different models, including AuraFlow, SD3.5, Flux, and more, including video models.\n\nWhen \"scaling\" is set to \"exponential\" it uses the method employed by Flux, which is actually quite good with SD3.5. \"linear\" is the default method used by SD3.5."],"color":"#432","bgcolor":"#653"},{"id":687,"type":"Note","pos":[2917.13427734375,5452.19189453125],"size":[257.2243957519531,88],"flags":{},"order":35,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Tip: use SigmasPreview very heavily so that you can *see* what's going on!"],"color":"#432","bgcolor":"#653"},{"id":713,"type":"Note","pos":[4574.66552734375,4613.29833984375],"size":[280.0735168457031,88],"flags":{},"order":36,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["INPAINTING TIP: Try using the settings to the right with a feathered mask."],"color":"#432","bgcolor":"#653"},{"id":693,"type":"FluxLoader","pos":[4610,3190],"size":[315,282],"flags":{},"order":37,"mode":0,"inputs":[],"outputs":[{"name":"model","localized_name":"model","type":"MODEL","links":[1978],"slot_index":0},{"name":"clip","localized_name":"clip","type":"CLIP","links":null},{"name":"vae","localized_name":"vae","type":"VAE","links":null},{"name":"clip_vision","localized_name":"clip_vision","type":"CLIP_VISION","links":null},{"name":"style_model","localized_name":"style_model","type":"STYLE_MODEL","links":null}],"properties":{"Node name for S&R":"FluxLoader"},"widgets_values":["consolidated_s6700.safetensors","default",".use_ckpt_clip",".none",".use_ckpt_vae",".none",".none"]},{"id":670,"type":"SigmasSchedulePreview","pos":[3847.346923828125,5244.1513671875],"size":[315,270],"flags":{},"order":38,"mode":0,"inputs":[{"name":"model","localized_name":"model","type":"MODEL","link":null},{"name":"sigmas","localized_name":"sigmas","type":"SIGMAS","shape":7,"link":null}],"outputs":[],"properties":{"Node name for S&R":"SigmasSchedulePreview"},"widgets_values":["hard",0.25,1,1,1,"beta57",30,2.1,0]},{"id":655,"type":"Note","pos":[1070,3330],"size":[296.8880615234375,104.9301986694336],"flags":{},"order":39,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["BONGMath is an algorithm unique to RES4LYF that vastly improves sampling quality and coherence in most cases, with little to no effect on sampling speed.\n\nIt has no effect when eta is set to 0. \n"],"color":"#432","bgcolor":"#653"},{"id":638,"type":"Note","pos":[720,2770],"size":[309.9272155761719,264.8126525878906],"flags":{},"order":40,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["SPEED:\n\nAll multistep samplers, like Euler, use one model call per step. Therefore, they run at the same speed.\n\nAll others have the number of model calls per step listed at the end of the name in terms of \"stages\" (abbreviated \"s\").\n\nTherefore, \"res_2s\" has 2 stages, and uses 2 model calls per step. Each step will take 2x as long as a Euler step. \"ralston_3s\" will take 3x as long.\n\nImplicit samplers benefit enormously from an extra model call to initialize each step. Therefore, \"gauss-legendre_2s\" will actually use 3 model calls per step.\n\n"],"color":"#432","bgcolor":"#653"},{"id":681,"type":"Note","pos":[720,3100],"size":[320.96875,168.8627166748047],"flags":{},"order":41,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["IMPORTANT: the seed here is set to -1! \n\nThis means \"use the next available seed\" (which will be the most recently used seed + 1).\n\nThis setting is irrelevant if eta = 0.0. It is only used for SDE sampling (where noise is added after each step, the amount of which is controlled by \"eta\").\n\n"],"color":"#432","bgcolor":"#653"},{"id":654,"type":"BetaSamplingScheduler","pos":[1450,2730],"size":[210,106],"flags":{},"order":42,"mode":0,"inputs":[{"name":"model","localized_name":"model","type":"MODEL","link":null}],"outputs":[{"name":"SIGMAS","localized_name":"SIGMAS","type":"SIGMAS","links":null}],"properties":{"Node name for S&R":"BetaSamplingScheduler"},"widgets_values":[20,0.5,0.7]},{"id":653,"type":"Note","pos":[1420,2890],"size":[252.12789916992188,117.73304748535156],"flags":{},"order":43,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["\"beta57\" is equivalent to the BetaSamplingScheduler node above. I have found the results to be generally superior to the default \"beta\" (where the values are both set to 0.60).\n\n\n"],"color":"#432","bgcolor":"#653"},{"id":651,"type":"Note","pos":[1070,2770],"size":[302.55828857421875,245.86517333984375],"flags":{},"order":44,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["SDE NOISE:\n\n\"eta\" represents how much noise the sampler adds after each step. If set to 0.0, the samplers will be \"ODEs\". If set to > 0.0, they will be \"SDEs\" and/or \"ancestral\". \n\nThe math has been carefully designed for both variance preserving and exploding models: results are particularly good with SD1.5, SDXL, Stable Cascade, Auraflow, SD3.5 Medium, and Flux. \n\nIn most cases, using eta will result in gains in quality and coherence when using at least 20 sampling steps. Best results are with 30 or more. \n"],"color":"#432","bgcolor":"#653"},{"id":643,"type":"Note","pos":[751.2572021484375,4100],"size":[507.688720703125,165.58355712890625],"flags":{},"order":45,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["\"steps_to_run\": When set to -1, it will run all steps per usual. \n\nIf set to a positive value, it will run that number of steps, and then stop and pass the latent off to the next sampler node.\n\nIf the next sampler node's \"sampler_mode\" is set to \"resample\", it will then continue where the first one left off. \n\nThis even works with multistep samplers, as it carries its \"momentum\" from node to the next. This is not the case for \"KSampler (Advanced)\", or any other sampler nodes that I'm aware of."],"color":"#432","bgcolor":"#653"},{"id":658,"type":"ClownsharKSampler_Beta","pos":[2100,3090],"size":[296.93646240234375,418],"flags":{},"order":46,"mode":0,"inputs":[{"name":"model","localized_name":"model","type":"MODEL","shape":7,"link":null},{"name":"positive","localized_name":"positive","type":"CONDITIONING","shape":7,"link":null},{"name":"negative","localized_name":"negative","type":"CONDITIONING","shape":7,"link":null},{"name":"latent_image","localized_name":"latent_image","type":"LATENT","shape":7,"link":null},{"name":"sigmas","localized_name":"sigmas","type":"SIGMAS","shape":7,"link":null},{"name":"guides","localized_name":"guides","type":"GUIDES","shape":7,"link":null},{"name":"options","localized_name":"options","type":"OPTIONS","shape":7,"link":null}],"outputs":[{"name":"output","localized_name":"output","type":"LATENT","links":[],"slot_index":0},{"name":"denoised","localized_name":"denoised","type":"LATENT","links":null},{"name":"options","localized_name":"options","type":"OPTIONS","links":null}],"properties":{"Node name for S&R":"ClownsharKSampler_Beta"},"widgets_values":[0.5,"exponential/res_3s","beta57",30,33,1,5.5,0,"fixed","standard",true]},{"id":667,"type":"Note","pos":[2623.965576171875,2762.71484375],"size":[248.99002075195312,111.55696105957031],"flags":{},"order":47,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["OPTIONS NODES:\n\nThese can be connected directly to ClownSampler, ClownSharkSampler, and SharkSampler, to control a variety of advanced parameters."],"color":"#432","bgcolor":"#653"},{"id":724,"type":"CLIPTextEncode","pos":[990,4960],"size":[210,88],"flags":{},"order":48,"mode":0,"inputs":[{"name":"clip","localized_name":"clip","type":"CLIP","link":null}],"outputs":[{"name":"CONDITIONING","localized_name":"CONDITIONING","type":"CONDITIONING","links":[1982,1983],"slot_index":0}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":[""]},{"id":722,"type":"ClownGuide_Beta","pos":[1250,5430],"size":[315,290],"flags":{},"order":49,"mode":0,"inputs":[{"name":"guide","localized_name":"guide","type":"LATENT","shape":7,"link":null},{"name":"mask","localized_name":"mask","type":"MASK","shape":7,"link":null},{"name":"weights","localized_name":"weights","type":"SIGMAS","shape":7,"link":null}],"outputs":[{"name":"guides","localized_name":"guides","type":"GUIDES","links":[1984],"slot_index":0}],"properties":{"Node name for S&R":"ClownGuide_Beta"},"widgets_values":["epsilon",false,false,0.5,1,"constant",0,1000,false]},{"id":723,"type":"ClownGuide_Beta","pos":[1620,5430],"size":[315,290],"flags":{},"order":50,"mode":0,"inputs":[{"name":"guide","localized_name":"guide","type":"LATENT","shape":7,"link":null},{"name":"mask","localized_name":"mask","type":"MASK","shape":7,"link":null},{"name":"weights","localized_name":"weights","type":"SIGMAS","shape":7,"link":null}],"outputs":[{"name":"guides","localized_name":"guides","type":"GUIDES","links":[1985],"slot_index":0}],"properties":{"Node name for S&R":"ClownGuide_Beta"},"widgets_values":["epsilon",true,true,0.75,1,"beta57",0,10,false]},{"id":720,"type":"ClownsharKSampler_Beta","pos":[1260,4940],"size":[315,418],"flags":{},"order":116,"mode":0,"inputs":[{"name":"model","localized_name":"model","type":"MODEL","shape":7,"link":null},{"name":"positive","localized_name":"positive","type":"CONDITIONING","shape":7,"link":1982},{"name":"negative","localized_name":"negative","type":"CONDITIONING","shape":7,"link":1983},{"name":"latent_image","localized_name":"latent_image","type":"LATENT","shape":7,"link":null},{"name":"sigmas","localized_name":"sigmas","type":"SIGMAS","shape":7,"link":null},{"name":"guides","localized_name":"guides","type":"GUIDES","shape":7,"link":1984},{"name":"options","localized_name":"options","type":"OPTIONS","shape":7,"link":null}],"outputs":[{"name":"output","localized_name":"output","type":"LATENT","links":null},{"name":"denoised","localized_name":"denoised","type":"LATENT","links":null},{"name":"options","localized_name":"options","type":"OPTIONS","links":null}],"properties":{"Node name for S&R":"ClownsharKSampler_Beta"},"widgets_values":[0,"multistep/res_2m","beta57",30,-1,1,1,0,"fixed","unsample",true]},{"id":721,"type":"ClownsharKSampler_Beta","pos":[1620,4940],"size":[315,418],"flags":{},"order":117,"mode":0,"inputs":[{"name":"model","localized_name":"model","type":"MODEL","shape":7,"link":null},{"name":"positive","localized_name":"positive","type":"CONDITIONING","shape":7,"link":null},{"name":"negative","localized_name":"negative","type":"CONDITIONING","shape":7,"link":null},{"name":"latent_image","localized_name":"latent_image","type":"LATENT","shape":7,"link":null},{"name":"sigmas","localized_name":"sigmas","type":"SIGMAS","shape":7,"link":null},{"name":"guides","localized_name":"guides","type":"GUIDES","shape":7,"link":1985},{"name":"options","localized_name":"options","type":"OPTIONS","shape":7,"link":null}],"outputs":[{"name":"output","localized_name":"output","type":"LATENT","links":null},{"name":"denoised","localized_name":"denoised","type":"LATENT","links":null},{"name":"options","localized_name":"options","type":"OPTIONS","links":null}],"properties":{"Node name for S&R":"ClownsharKSampler_Beta"},"widgets_values":[0,"multistep/res_2m","beta57",30,-1,1,5.5,-1,"fixed","resample",true]},{"id":727,"type":"Note","pos":[890,5170],"size":[333.3896179199219,108.9758071899414],"flags":{},"order":51,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["UNSAMPLER SETTINGS: \n\nEta should usually be 0.0. \nCFG should be 1.0, and used with an empty prompt.\n\nDenoise < 1.0 can help with adherence to the unsampled image."],"color":"#432","bgcolor":"#653"},{"id":731,"type":"Note","pos":[1980,5160],"size":[364.70263671875,103.89823150634766],"flags":{},"order":52,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Ensure resampler denoise matches the unsampler denoise.\n\nLow eta values can be used here (try 0.1 to 0.25). Sometimes they can actually improve adherence to the unsampled image."],"color":"#432","bgcolor":"#653"},{"id":733,"type":"Note","pos":[880,5530],"size":[339.3138122558594,133.51815795898438],"flags":{},"order":53,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Typical guide settings for unsampling/resampling with a rectified flow model (AuraFlow, SD3.5, Flux) are to the right.\n\nThis will generally NOT work well with UNSAMPLING SD1.5, SDXL, Cascade, etc.! (These guide nodes however work great as regular guides with these models!)"],"color":"#432","bgcolor":"#653"},{"id":659,"type":"Note","pos":[1427.1387939453125,3646.506591796875],"size":[352.2813415527344,88],"flags":{},"order":54,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["All of the configurations above will have the same output (and runtime) as the chained samplers below."],"color":"#432","bgcolor":"#653"},{"id":610,"type":"ClownsharKSampler_Beta","pos":[-1373.449462890625,3188.063232421875],"size":[311.41375732421875,693.9824829101562],"flags":{},"order":128,"mode":0,"inputs":[{"name":"model","localized_name":"model","type":"MODEL","shape":7,"link":1909},{"name":"positive","localized_name":"positive","type":"CONDITIONING","shape":7,"link":1907},{"name":"negative","localized_name":"negative","type":"CONDITIONING","shape":7,"link":1908},{"name":"latent_image","localized_name":"latent_image","type":"LATENT","shape":7,"link":null},{"name":"sigmas","localized_name":"sigmas","type":"SIGMAS","shape":7,"link":null},{"name":"guides","localized_name":"guides","type":"GUIDES","shape":7,"link":null},{"name":"options","localized_name":"options","type":"OPTIONS","shape":7,"link":1951},{"name":"options 2","type":"OPTIONS","link":null}],"outputs":[{"name":"output","localized_name":"output","type":"LATENT","links":[1949],"slot_index":0},{"name":"denoised","localized_name":"denoised","type":"LATENT","links":null},{"name":"options","localized_name":"options","type":"OPTIONS","links":null}],"properties":{"Node name for S&R":"ClownsharKSampler_Beta"},"widgets_values":[0.5,"exponential/res_3s","beta57",30,-1,1,5.5,1,"fixed","standard",true]},{"id":612,"type":"ClownsharKSampler_Beta","pos":[-1014.779296875,3187.209228515625],"size":[314.421142578125,693.9824829101562],"flags":{},"order":130,"mode":0,"inputs":[{"name":"model","localized_name":"model","type":"MODEL","shape":7,"link":1910},{"name":"positive","localized_name":"positive","type":"CONDITIONING","shape":7,"link":1911},{"name":"negative","localized_name":"negative","type":"CONDITIONING","shape":7,"link":1912},{"name":"latent_image","localized_name":"latent_image","type":"LATENT","shape":7,"link":1949},{"name":"sigmas","localized_name":"sigmas","type":"SIGMAS","shape":7,"link":null},{"name":"guides","localized_name":"guides","type":"GUIDES","shape":7,"link":null},{"name":"options","localized_name":"options","type":"OPTIONS","shape":7,"link":1947},{"name":"options 2","type":"OPTIONS","link":null}],"outputs":[{"name":"output","localized_name":"output","type":"LATENT","links":[1950],"slot_index":0},{"name":"denoised","localized_name":"denoised","type":"LATENT","links":null},{"name":"options","localized_name":"options","type":"OPTIONS","links":null}],"properties":{"Node name for S&R":"ClownsharKSampler_Beta"},"widgets_values":[0.5,"exponential/res_3s","beta57",30,-1,1,5.5,-1,"fixed","standard",true]},{"id":734,"type":"Note","pos":[1863.741943359375,2902.93310546875],"size":[433.063232421875,101.85264587402344],"flags":{},"order":55,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["NOTE: steps_to_run = -1 means to run all steps (the usual default approach for any sampler).\n\nOn the right, steps_to_run > steps, so it will run all the way till the end, just like on the left."],"color":"#432","bgcolor":"#653"},{"id":613,"type":"ClownsharKSampler_Beta","pos":[-648.0813598632812,3185.39013671875],"size":[309.2452087402344,691.814208984375],"flags":{},"order":131,"mode":0,"inputs":[{"name":"model","localized_name":"model","type":"MODEL","shape":7,"link":1926},{"name":"positive","localized_name":"positive","type":"CONDITIONING","shape":7,"link":1914},{"name":"negative","localized_name":"negative","type":"CONDITIONING","shape":7,"link":1915},{"name":"latent_image","localized_name":"latent_image","type":"LATENT","shape":7,"link":1950},{"name":"sigmas","localized_name":"sigmas","type":"SIGMAS","shape":7,"link":null},{"name":"guides","localized_name":"guides","type":"GUIDES","shape":7,"link":null},{"name":"options","localized_name":"options","type":"OPTIONS","shape":7,"link":1948},{"name":"options 2","type":"OPTIONS","link":null}],"outputs":[{"name":"output","localized_name":"output","type":"LATENT","links":[1923],"slot_index":0},{"name":"denoised","localized_name":"denoised","type":"LATENT","links":null},{"name":"options","localized_name":"options","type":"OPTIONS","links":null}],"properties":{"Node name for S&R":"ClownsharKSampler_Beta"},"widgets_values":[0.5,"exponential/res_3s","beta57",30,-1,1,1,-1,"fixed","standard",true]},{"id":716,"type":"Note","pos":[4574.66552734375,4963.29833984375],"size":[270.65277099609375,108.61186218261719],"flags":{},"order":56,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["INPAINTING TIP: Try using the settings to the right with a feathered mask, and \"end_step\" set to the number of sampling steps (or less). This will allow the entire image to change slightly to help heal any seams that may appear."],"color":"#432","bgcolor":"#653"},{"id":714,"type":"ClownGuide_Beta","pos":[4874.66552734375,4503.29833984375],"size":[257.2991638183594,290],"flags":{},"order":57,"mode":0,"inputs":[{"name":"guide","localized_name":"guide","type":"LATENT","shape":7,"link":null},{"name":"mask","localized_name":"mask","type":"MASK","shape":7,"link":null},{"name":"weights","localized_name":"weights","type":"SIGMAS","shape":7,"link":null}],"outputs":[{"name":"guides","localized_name":"guides","type":"GUIDES","links":null}],"properties":{"Node name for S&R":"ClownGuide_Beta"},"widgets_values":["epsilon",false,false,1,1,"constant",0,1000,false]},{"id":715,"type":"ClownGuide_Beta","pos":[4874.66552734375,4863.29833984375],"size":[254.67617797851562,290],"flags":{},"order":58,"mode":0,"inputs":[{"name":"guide","localized_name":"guide","type":"LATENT","shape":7,"link":null},{"name":"mask","localized_name":"mask","type":"MASK","shape":7,"link":null},{"name":"weights","localized_name":"weights","type":"SIGMAS","shape":7,"link":null}],"outputs":[{"name":"guides","localized_name":"guides","type":"GUIDES","links":null}],"properties":{"Node name for S&R":"ClownGuide_Beta"},"widgets_values":["epsilon",false,true,1,1,"beta57",0,40,false]},{"id":735,"type":"ClownGuide_Beta","pos":[5147.18896484375,4861.30419921875],"size":[254.67617797851562,290],"flags":{},"order":59,"mode":0,"inputs":[{"name":"guide","localized_name":"guide","type":"LATENT","shape":7,"link":null},{"name":"mask","localized_name":"mask","type":"MASK","shape":7,"link":null},{"name":"weights","localized_name":"weights","type":"SIGMAS","shape":7,"link":null}],"outputs":[{"name":"guides","localized_name":"guides","type":"GUIDES","links":null}],"properties":{"Node name for S&R":"ClownGuide_Beta"},"widgets_values":["flow",false,false,1,1,"constant",0,-1,false]},{"id":709,"type":"Note","pos":[5570,4480],"size":[280.0735168457031,88],"flags":{},"order":60,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Note: The \"guide_masked\" latent image will control the region that is \"masked out\"! And vice versa with \"guide_unmasked\"."],"color":"#432","bgcolor":"#653"},{"id":688,"type":"ClownGuides_Beta","pos":[5542.884765625,3927.678955078125],"size":[315,450],"flags":{},"order":61,"mode":0,"inputs":[{"name":"guide_masked","localized_name":"guide_masked","type":"LATENT","shape":7,"link":null},{"name":"guide_unmasked","localized_name":"guide_unmasked","type":"LATENT","shape":7,"link":null},{"name":"mask","localized_name":"mask","type":"MASK","shape":7,"link":null},{"name":"weights_masked","localized_name":"weights_masked","type":"SIGMAS","shape":7,"link":null},{"name":"weights_unmasked","localized_name":"weights_unmasked","type":"SIGMAS","shape":7,"link":null}],"outputs":[{"name":"guides","localized_name":"guides","type":"GUIDES","links":[1977],"slot_index":0}],"properties":{"Node name for S&R":"ClownGuides_Beta"},"widgets_values":["epsilon",false,true,0.75,0.75,1,1,"beta57","constant",0,0,15,15,false]},{"id":707,"type":"ClownGuide_Beta","pos":[5206.15283203125,3929.6015625],"size":[315,290],"flags":{},"order":62,"mode":0,"inputs":[{"name":"guide","localized_name":"guide","type":"LATENT","shape":7,"link":null},{"name":"mask","localized_name":"mask","type":"MASK","shape":7,"link":null},{"name":"weights","localized_name":"weights","type":"SIGMAS","shape":7,"link":null}],"outputs":[{"name":"guides","localized_name":"guides","type":"GUIDES","links":null}],"properties":{"Node name for S&R":"ClownGuide_Beta"},"widgets_values":["pseudoimplicit",false,false,0.15,1,"beta57",5,15,false]},{"id":706,"type":"Note","pos":[5228.6552734375,4270.94677734375],"size":[280.0735168457031,88],"flags":{},"order":63,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Tip: Try a delayed start (start_step > 0), like shown above with pseudoimplicit, for wacky results!"],"color":"#432","bgcolor":"#653"},{"id":711,"type":"Note","pos":[5570,4610],"size":[280.0735168457031,88],"flags":{},"order":64,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Tip: I recommend drawing your masks on random load image nodes, for convenience."],"color":"#432","bgcolor":"#653"},{"id":712,"type":"Note","pos":[5546.97216796875,3772.719970703125],"size":[308.80828857421875,88],"flags":{},"order":65,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["INPAINTING TIP: Use ClownRegionalConditioning ClownGuides together with the same mask!"],"color":"#432","bgcolor":"#653"},{"id":742,"type":"Note","pos":[6420.9990234375,3806.16064453125],"size":[332.85687255859375,106.67533874511719],"flags":{},"order":66,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Regional conditioning requires for you to patch the model with a \"Re\" (for Regional) patcher (shown below) and to use the beta versions of either ClownSampler + SharkSampler, or ClownSharkSampler.\n"],"color":"#432","bgcolor":"#653"},{"id":705,"type":"Note","pos":[6811.22021484375,3808.38671875],"size":[379.0997619628906,577.0400390625],"flags":{},"order":67,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["\"weight\" affects how strongly the attention mask is applied, which controls how well the masked and unmasked regions are separated. \n\n\"region_bleed\" affects how much the regions can \"talk\" with each other (via self-attention). region_bleed=0.0 will ensure the strongest possible separation, but higher values can help prevent visible seams from forming along the edges of the masked areas.\n\n\nWEIGHT SCHEDULER:\n\nThis controls the weight (strength of separation of the regions) at each step. For example, with the settings shown, the weight will begin at 1.70, and gradually decline before reaching 0.0 after 10 steps (and remaining at 0.0).\n\n\"mask_type\" currently only has the \"gradient\" option, but others may be added later. \n\nYes, this does mean you can use masks with gradients (so you can feather and blur them if you wish)!\n\n(Note: unlike other implementations, ClownRegionalConditioning is compatible with CFG.)\n\nMASK_TYPE:\n\nThere are options here that are a bit like causal attention in LLMs. For example, \"boolean_masked\" means the masked area can \"see\" the entire image (via self-attention), while the unmasked area cannot \"see\" the masked area. This is very useful with Flux if you wish to generate a character close to the camera but have an unblurred background. Place the character in the masked area, describe only the background in the unmasked area, select \"boolean_masked\" and set region_bleed = 0.0. \n\nEDGE_WIDTH:\n\nThis creates overlapping self-attention at the boundaries between masked and unmasked areas. This helps to conceal seams. Try values like 50 or 150 to start, and watch the preview.\n\n"],"color":"#432","bgcolor":"#653"},{"id":738,"type":"ReHiDreamPatcher","pos":[6478.654296875,4098.83642578125],"size":[210,58],"flags":{},"order":68,"mode":0,"inputs":[{"name":"model","localized_name":"model","type":"MODEL","link":null}],"outputs":[{"name":"model","localized_name":"model","type":"MODEL","links":null}],"properties":{"Node name for S&R":"ReHiDreamPatcher"},"widgets_values":[true]},{"id":737,"type":"ReFluxPatcher","pos":[6478.654296875,3978.83642578125],"size":[210,58],"flags":{},"order":69,"mode":0,"inputs":[{"name":"model","localized_name":"model","type":"MODEL","link":null}],"outputs":[{"name":"model","localized_name":"model","type":"MODEL","links":null}],"properties":{"Node name for S&R":"ReFluxPatcher"},"widgets_values":[true]},{"id":739,"type":"ReSD35Patcher","pos":[6479.376953125,4216.78466796875],"size":[210,58],"flags":{},"order":70,"mode":0,"inputs":[{"name":"model","localized_name":"model","type":"MODEL","link":null}],"outputs":[{"name":"model","localized_name":"model","type":"MODEL","links":null}],"properties":{"Node name for S&R":"ReSD35Patcher"},"widgets_values":[true]},{"id":740,"type":"ReAuraPatcher","pos":[6477.93115234375,4334.61669921875],"size":[210,58],"flags":{},"order":71,"mode":0,"inputs":[{"name":"model","localized_name":"model","type":"MODEL","link":null}],"outputs":[{"name":"model","localized_name":"model","type":"MODEL","links":null}],"properties":{"Node name for S&R":"ReAuraPatcher"},"widgets_values":[true]},{"id":741,"type":"ReWanPatcher","pos":[6480.099609375,4454.50146484375],"size":[210,58],"flags":{},"order":72,"mode":0,"inputs":[{"name":"model","localized_name":"model","type":"MODEL","link":null}],"outputs":[{"name":"model","localized_name":"model","type":"MODEL","links":null}],"properties":{"Node name for S&R":"ReWanPatcher"},"widgets_values":[true]},{"id":736,"type":"ClownRegionalConditioning","pos":[7227.83642578125,3814.55322265625],"size":[254.134521484375,330],"flags":{},"order":73,"mode":0,"inputs":[{"name":"positive_masked","localized_name":"positive_masked","type":"CONDITIONING","shape":7,"link":null},{"name":"positive_unmasked","localized_name":"positive_unmasked","type":"CONDITIONING","shape":7,"link":null},{"name":"mask","localized_name":"mask","type":"MASK","shape":7,"link":null},{"name":"weights","localized_name":"weights","type":"SIGMAS","shape":7,"link":null},{"name":"region_bleeds","localized_name":"region_bleeds","type":"SIGMAS","shape":7,"link":null}],"outputs":[{"name":"positive","localized_name":"positive","type":"CONDITIONING","links":null}],"properties":{"Node name for S&R":"ClownRegionalConditioning"},"widgets_values":[1,0,0,"constant",0,-1,"boolean",0,true]},{"id":744,"type":"Note","pos":[7538.74755859375,3817.72216796875],"size":[337.9170227050781,389.18304443359375],"flags":{},"order":74,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["It can be confusing at first, trying to understand which area is affected by which conditioning or mask. I suggest starting with prompts like \"blue ice\" and \"red fire\" with region_bleed = 0.0 to clear things up.\n\nTO THE LEFT:\n\nThe two nodes to the left will automatically create an unmasked area, based on what areas are not masked by mask, mask_A, or mask_B.\n\nAs an example:\n\nPositive_A will affect the area masked by \"mask_A\".\n\nPositive_B will affect the area masked by \"mask_B\".\n\nPositive_unmasked will affect the area that is not masked by \"mask_A\" or \"mask_B\".\n\nTO THE RIGHT:\n\nThese two nodes give you manual control over the area for each prompt. This is especially useful for temporal attention with video modes like WAN. The risk is if you fail to ensure every part of the image (or frame) is masked by one of the masks, you'll end up with an unconditioned area that will look like pure noise."],"color":"#432","bgcolor":"#653"},{"id":747,"type":"ClownRegionalConditioning_ABC","pos":[7916.001953125,4221.97314453125],"size":[250.51895141601562,390],"flags":{},"order":75,"mode":0,"inputs":[{"name":"positive_A","localized_name":"positive_A","type":"CONDITIONING","shape":7,"link":null},{"name":"positive_B","localized_name":"positive_B","type":"CONDITIONING","shape":7,"link":null},{"name":"positive_C","localized_name":"positive_C","type":"CONDITIONING","shape":7,"link":null},{"name":"mask_A","localized_name":"mask_A","type":"MASK","shape":7,"link":null},{"name":"mask_B","localized_name":"mask_B","type":"MASK","shape":7,"link":null},{"name":"mask_C","localized_name":"mask_C","type":"MASK","shape":7,"link":null},{"name":"weights","localized_name":"weights","type":"SIGMAS","shape":7,"link":null},{"name":"region_bleeds","localized_name":"region_bleeds","type":"SIGMAS","shape":7,"link":null}],"outputs":[{"name":"positive","localized_name":"positive","type":"CONDITIONING","links":null}],"properties":{"Node name for S&R":"ClownRegionalConditioning_ABC"},"widgets_values":[1,0,0,"constant",0,100,"boolean",0,false]},{"id":743,"type":"ClownRegionalConditioning3","pos":[7224.5439453125,4216.19189453125],"size":[257.02386474609375,370],"flags":{},"order":76,"mode":0,"inputs":[{"name":"positive_A","localized_name":"positive_A","type":"CONDITIONING","shape":7,"link":null},{"name":"positive_B","localized_name":"positive_B","type":"CONDITIONING","shape":7,"link":null},{"name":"positive_unmasked","localized_name":"positive_unmasked","type":"CONDITIONING","shape":7,"link":null},{"name":"mask_A","localized_name":"mask_A","type":"MASK","shape":7,"link":null},{"name":"mask_B","localized_name":"mask_B","type":"MASK","shape":7,"link":null},{"name":"weights","localized_name":"weights","type":"SIGMAS","shape":7,"link":null},{"name":"region_bleeds","localized_name":"region_bleeds","type":"SIGMAS","shape":7,"link":null}],"outputs":[{"name":"positive","localized_name":"positive","type":"CONDITIONING","links":null}],"properties":{"Node name for S&R":"ClownRegionalConditioning3"},"widgets_values":[1,0,0,"constant",0,100,"boolean",0,false]},{"id":746,"type":"ClownRegionalConditioning_AB","pos":[7918.16943359375,3816.63427734375],"size":[248.7556610107422,350],"flags":{},"order":77,"mode":0,"inputs":[{"name":"positive_A","localized_name":"positive_A","type":"CONDITIONING","shape":7,"link":null},{"name":"positive_B","localized_name":"positive_B","type":"CONDITIONING","shape":7,"link":null},{"name":"mask_A","localized_name":"mask_A","type":"MASK","shape":7,"link":null},{"name":"mask_B","localized_name":"mask_B","type":"MASK","shape":7,"link":null},{"name":"weights","localized_name":"weights","type":"SIGMAS","shape":7,"link":null},{"name":"region_bleeds","localized_name":"region_bleeds","type":"SIGMAS","shape":7,"link":null}],"outputs":[{"name":"positive","localized_name":"positive","type":"CONDITIONING","links":null}],"properties":{"Node name for S&R":"ClownRegionalConditioning_AB"},"widgets_values":[1,0,0,"constant",0,-1,"boolean",0,false]},{"id":752,"type":"ClownRegionalConditioning_AB","pos":[7918.654296875,4798.83642578125],"size":[248.7556610107422,350],"flags":{},"order":120,"mode":0,"inputs":[{"name":"positive_A","localized_name":"positive_A","type":"CONDITIONING","shape":7,"link":null},{"name":"positive_B","localized_name":"positive_B","type":"CONDITIONING","shape":7,"link":null},{"name":"mask_A","localized_name":"mask_A","type":"MASK","shape":7,"link":1986},{"name":"mask_B","localized_name":"mask_B","type":"MASK","shape":7,"link":1987},{"name":"weights","localized_name":"weights","type":"SIGMAS","shape":7,"link":null},{"name":"region_bleeds","localized_name":"region_bleeds","type":"SIGMAS","shape":7,"link":null}],"outputs":[{"name":"positive","localized_name":"positive","type":"CONDITIONING","links":null}],"properties":{"Node name for S&R":"ClownRegionalConditioning_AB"},"widgets_values":[1,0,0,"constant",0,-1,"boolean",0,false]},{"id":754,"type":"ClownRegionalConditioning_AB","pos":[7121.22314453125,4815.88916015625],"size":[248.7556610107422,350],"flags":{},"order":119,"mode":0,"inputs":[{"name":"positive_A","localized_name":"positive_A","type":"CONDITIONING","shape":7,"link":null},{"name":"positive_B","localized_name":"positive_B","type":"CONDITIONING","shape":7,"link":null},{"name":"mask_A","localized_name":"mask_A","type":"MASK","shape":7,"link":1988},{"name":"mask_B","localized_name":"mask_B","type":"MASK","shape":7,"link":1989},{"name":"weights","localized_name":"weights","type":"SIGMAS","shape":7,"link":null},{"name":"region_bleeds","localized_name":"region_bleeds","type":"SIGMAS","shape":7,"link":null}],"outputs":[{"name":"positive","localized_name":"positive","type":"CONDITIONING","links":null}],"properties":{"Node name for S&R":"ClownRegionalConditioning_AB"},"widgets_values":[1,0,0,"constant",0,-1,"boolean",0,false]},{"id":756,"type":"TemporalCrossAttnMask","pos":[6877.73095703125,4789.87841796875],"size":[210,82],"flags":{},"order":78,"mode":0,"inputs":[],"outputs":[{"name":"temporal_mask","localized_name":"temporal_mask","type":"MASK","links":[1988]}],"properties":{"Node name for S&R":"TemporalCrossAttnMask"},"widgets_values":[1,65]},{"id":757,"type":"TemporalCrossAttnMask","pos":[6876.95068359375,4953.83349609375],"size":[210,82],"flags":{},"order":79,"mode":0,"inputs":[],"outputs":[{"name":"temporal_mask","localized_name":"temporal_mask","type":"MASK","links":[1989],"slot_index":0}],"properties":{"Node name for S&R":"TemporalCrossAttnMask"},"widgets_values":[65,133]},{"id":755,"type":"Note","pos":[7100.990234375,4665.60302734375],"size":[275.73828125,88],"flags":{},"order":80,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["If sliding self-attention is used, only cross-attention needs to be masked."],"color":"#432","bgcolor":"#653"},{"id":758,"type":"Note","pos":[7644.2734375,4659.04248046875],"size":[275.73828125,88],"flags":{},"order":81,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Sometimes it is beneficial to allow self-attention masks to overlap slightly. This is similar to the \"edge_width\" parameter above, except it overlaps frames, not spatial components (areas of the image)."],"color":"#432","bgcolor":"#653"},{"id":751,"type":"TemporalSplitAttnMask","pos":[7668.654296875,4808.83642578125],"size":[210,130],"flags":{},"order":82,"mode":0,"inputs":[],"outputs":[{"name":"temporal_mask","localized_name":"temporal_mask","type":"MASK","links":[1986],"slot_index":0}],"properties":{"Node name for S&R":"TemporalSplitAttnMask"},"widgets_values":[1,69,1,65]},{"id":753,"type":"TemporalSplitAttnMask","pos":[7668.654296875,4998.83642578125],"size":[210,130],"flags":{},"order":83,"mode":0,"inputs":[],"outputs":[{"name":"temporal_mask","localized_name":"temporal_mask","type":"MASK","links":[1987],"slot_index":0}],"properties":{"Node name for S&R":"TemporalSplitAttnMask"},"widgets_values":[61,133,65,133]},{"id":748,"type":"ReWanPatcherAdvanced","pos":[6452.8740234375,4585.66064453125],"size":[279.3623352050781,214],"flags":{},"order":84,"mode":0,"inputs":[{"name":"model","localized_name":"model","type":"MODEL","link":null}],"outputs":[{"name":"model","localized_name":"model","type":"MODEL","links":null}],"properties":{"Node name for S&R":"ReWanPatcherAdvanced"},"widgets_values":["all","all",true,"standard",15]},{"id":749,"type":"Note","pos":[6767.17333984375,4622.91064453125],"size":[280.0735168457031,88],"flags":{},"order":85,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["The advanced version of the WAN patcher can set a sliding self-attention window. The \"size\" is the number of latent frames (which is 1/4th the number of frames in the final output)."],"color":"#432","bgcolor":"#653"},{"id":750,"type":"Note","pos":[6451.54443359375,4858.55126953125],"size":[288.02178955078125,175.42584228515625],"flags":{},"order":86,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Sliding self-attention is useful for generating sequences where the conditioning changes from one frame to another, or for reducing VRAM requirements and reducing inference time when generating long sequences. At least 601 frames can be generated in one shot on a RTX 4090 with the above settings.\n\nThere are two modes: standard and circular. Circular allows the first frame to \"see\" the last frame, whereas standard does not."],"color":"#432","bgcolor":"#653"},{"id":689,"type":"Note","pos":[4562.91796875,3811.044189453125],"size":[494.1324462890625,535.6380004882812],"flags":{},"order":87,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Guides are a way of controlling the image generation process without denoising an image directly, but by steering the denoising process itself. This can mimic many of the benefits of unsampling, without the need to spend extra time unsampling the image.\n\nThere are two main guide modes:\n\n\"Epsilon\" can be used in conjunction with unsampling/resampling workflows to dramatically improve results with rectified flow models (AuraFlow, SD3.5, Flux). It can also be used directly. It works by modifying the noise prediction made by the model to align with the guide image.\n\n\"Pseudoimplicit\" works by lying to the model about the state of the denoising process, so that it generates a noise prediction that strongly aligns with the guide image. \"Fully_pseudoimplicit\" is only supported with \"fully_implicit\" and \"diag_implicit\" samplers (all others will default back to pseudoimplicit).\n\nChannelwise and projection modes can have a dramatic effect. I especially recommend trying epsilon with these modes, though they are quite interesting with pseudoimplicit as well. \"projection_mode\" can result in some issues with image details if used for the entire sampling process.\n\nCUTOFF:\n\nFlux has extremely strong self-attention, and has issues with getting \"stuck\" if the guide strength is too high (or used for too many steps), which results in an output that looks nearly identical to the guide. \"cutoff\" does a crude check for how similar the image is to the guide - if it exceeds that value, it will turn off the guide for that step. Try setting to 0.5 or 0.6 when using Flux.\n\nWEIGHT SCHEDULERS:\n\nThese control the weight at each step. For example, with the settings shown:\n\n * the \"unmasked\" region will have a weight of 0.75 for the first 15 steps, then 0.0 for every step after that\n\n * the \"masked\" region will start with a weight of 0.75 for the first step, gradually declining until reaching 0.0 after 15 steps (and remaining at 0.0)\n"],"color":"#432","bgcolor":"#653"},{"id":725,"type":"VAEEncodeAdvanced","pos":[5936.5478515625,4869.4091796875],"size":[255.3756103515625,278],"flags":{},"order":88,"mode":0,"inputs":[{"name":"image_1","localized_name":"image_1","type":"IMAGE","shape":7,"link":null},{"name":"image_2","localized_name":"image_2","type":"IMAGE","shape":7,"link":null},{"name":"mask","localized_name":"mask","type":"IMAGE","shape":7,"link":null},{"name":"latent","localized_name":"latent","type":"LATENT","shape":7,"link":null},{"name":"vae","localized_name":"vae","type":"VAE","shape":7,"link":null}],"outputs":[{"name":"latent_1","localized_name":"latent_1","type":"LATENT","links":null},{"name":"latent_2","localized_name":"latent_2","type":"LATENT","links":null},{"name":"mask","localized_name":"mask","type":"MASK","links":null},{"name":"empty_latent","localized_name":"empty_latent","type":"LATENT","links":null},{"name":"width","localized_name":"width","type":"INT","links":null},{"name":"height","localized_name":"height","type":"INT","links":null}],"properties":{"Node name for S&R":"VAEEncodeAdvanced"},"widgets_values":["false",1024,1024,"red",false,"16_channels"]},{"id":726,"type":"Note","pos":[5636.24169921875,4865.904296875],"size":[257.97479248046875,159.16941833496094],"flags":{},"order":89,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["VAEEncodeAdvanced is a quality of life node for convenience when using multiple guides.\n\nNote: the mask input is for a black and white image. It is there for convenience with converting any masks you may have saved as black and white images into masks you can use in a workflow."],"color":"#432","bgcolor":"#653"},{"id":691,"type":"ClownsharKSampler_Beta","pos":[5894.66552734375,3923.29833984375],"size":[274.2724609375,418],"flags":{},"order":118,"mode":0,"inputs":[{"name":"model","localized_name":"model","type":"MODEL","shape":7,"link":null},{"name":"positive","localized_name":"positive","type":"CONDITIONING","shape":7,"link":null},{"name":"negative","localized_name":"negative","type":"CONDITIONING","shape":7,"link":null},{"name":"latent_image","localized_name":"latent_image","type":"LATENT","shape":7,"link":null},{"name":"sigmas","localized_name":"sigmas","type":"SIGMAS","shape":7,"link":null},{"name":"guides","localized_name":"guides","type":"GUIDES","shape":7,"link":1977},{"name":"options","localized_name":"options","type":"OPTIONS","shape":7,"link":null}],"outputs":[{"name":"output","localized_name":"output","type":"LATENT","links":null},{"name":"denoised","localized_name":"denoised","type":"LATENT","links":null},{"name":"options","localized_name":"options","type":"OPTIONS","links":null}],"properties":{"Node name for S&R":"ClownsharKSampler_Beta"},"widgets_values":[0.5,"multistep/res_2m","beta57",30,-1,1,5.5,0,"fixed","standard",true]},{"id":695,"type":"ModelSamplingAdvancedResolution","pos":[5630,3190],"size":[260.3999938964844,126],"flags":{},"order":129,"mode":0,"inputs":[{"name":"model","localized_name":"model","type":"MODEL","link":1980},{"name":"latent_image","localized_name":"latent_image","type":"LATENT","link":null}],"outputs":[{"name":"model","localized_name":"model","type":"MODEL","links":null}],"properties":{"Node name for S&R":"ModelSamplingAdvancedResolution"},"widgets_values":["exponential",1.35,0.85]},{"id":696,"type":"ModelSamplingAdvanced","pos":[5680,3000],"size":[210,82],"flags":{},"order":90,"mode":0,"inputs":[{"name":"model","localized_name":"model","type":"MODEL","link":null}],"outputs":[{"name":"model","localized_name":"model","type":"MODEL","links":null}],"properties":{"Node name for S&R":"ModelSamplingAdvanced"},"widgets_values":["exponential",3]},{"id":701,"type":"Note","pos":[4600,3040],"size":[327.4920959472656,88],"flags":{},"order":91,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Loader nodes are provided for convenience with Flux and SD3.5. The Flux loader can also load the Redux (and ClipVision) models for you."],"color":"#432","bgcolor":"#653"},{"id":703,"type":"SD35Loader","pos":[4610,2760],"size":[315,218],"flags":{},"order":92,"mode":0,"inputs":[],"outputs":[{"name":"model","localized_name":"model","type":"MODEL","links":null},{"name":"clip","localized_name":"clip","type":"CLIP","links":null},{"name":"vae","localized_name":"vae","type":"VAE","links":null}],"properties":{"Node name for S&R":"SD35Loader"},"widgets_values":["sd3.5_medium.safetensors","default",".use_ckpt_clip",".none",".none",".use_ckpt_vae"]},{"id":692,"type":"ReFluxPatcher","pos":[5010,3190],"size":[210,58],"flags":{},"order":115,"mode":0,"inputs":[{"name":"model","localized_name":"model","type":"MODEL","link":1978}],"outputs":[{"name":"model","localized_name":"model","type":"MODEL","links":[1979],"slot_index":0}],"properties":{"Node name for S&R":"ReFluxPatcher"},"widgets_values":[true]},{"id":700,"type":"Note","pos":[5000,3040],"size":[225.09121704101562,88],"flags":{},"order":93,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["This node must be used when using regional conditioning with Flux. "],"color":"#432","bgcolor":"#653"},{"id":694,"type":"FluxGuidanceDisable","pos":[5310,3190],"size":[210,82],"flags":{},"order":126,"mode":0,"inputs":[{"name":"model","localized_name":"model","type":"MODEL","link":1979}],"outputs":[{"name":"model","localized_name":"model","type":"MODEL","links":[1980],"slot_index":0}],"properties":{"Node name for S&R":"FluxGuidanceDisable"},"widgets_values":[true,true]},{"id":699,"type":"Note","pos":[5280,3010],"size":[253.01846313476562,112.91952514648438],"flags":{},"order":94,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["This disables \"Flux Guidance\" (which is actually NOT disabled by setting to 1.0 or 0.0). It can be helpful in many cases where you wish to banish the \"Flux look\" to the bottom of a creepy old well in Transylvania."],"color":"#432","bgcolor":"#653"},{"id":698,"type":"Note","pos":[5630,3370],"size":[402.51263427734375,88],"flags":{},"order":95,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["This node is similar ModelSamplingAdvanced, except it uses the dimensions of the latent image to set the shift value."],"color":"#432","bgcolor":"#653"},{"id":660,"type":"ClownsharKSampler_Beta","pos":[3907.121826171875,3512.491943359375],"size":[293.78173828125,578],"flags":{},"order":125,"mode":0,"inputs":[{"name":"model","localized_name":"model","type":"MODEL","shape":7,"link":null},{"name":"positive","localized_name":"positive","type":"CONDITIONING","shape":7,"link":null},{"name":"negative","localized_name":"negative","type":"CONDITIONING","shape":7,"link":null},{"name":"latent_image","localized_name":"latent_image","type":"LATENT","shape":7,"link":null},{"name":"sigmas","localized_name":"sigmas","type":"SIGMAS","shape":7,"link":null},{"name":"guides","localized_name":"guides","type":"GUIDES","shape":7,"link":null},{"name":"options","localized_name":"options","type":"OPTIONS","shape":7,"link":1962},{"name":"options 2","type":"OPTIONS","link":1963},{"name":"options 3","type":"OPTIONS","link":1991},{"name":"options 4","type":"OPTIONS","link":1968},{"name":"options 5","type":"OPTIONS","link":1971},{"name":"options 6","type":"OPTIONS","link":1972},{"name":"options 7","type":"OPTIONS","link":1974},{"name":"options 8","type":"OPTIONS","link":1990},{"name":"options 9","type":"OPTIONS","link":null}],"outputs":[{"name":"output","localized_name":"output","type":"LATENT","links":[],"slot_index":0},{"name":"denoised","localized_name":"denoised","type":"LATENT","links":null},{"name":"options","localized_name":"options","type":"OPTIONS","links":null}],"properties":{"Node name for S&R":"ClownsharKSampler_Beta"},"widgets_values":[0.5,"exponential/res_3s","beta57",30,-1,1,5.5,-1,"fixed","standard",true]},{"id":761,"type":"Note","pos":[3864.72119140625,2748.43408203125],"size":[381.44476318359375,310.7167053222656],"flags":{},"order":96,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["ClownOptions_SigmaScaling aims to BREAK the noise scaling math that was so carefully prepared by ClownOptions_SDE.\n\n\"noise_anchor_sde\" can make the image look much dirtier with lower values. Try 0.5 for starters, especially with any non-multistep sampler.\n\n\"s_noise\" increases the \"size\" of the noise added with each step. Values around 1.05-1.1 can considerably boost saturation in painterly images. BONGMath is particularly good when this is set to values > 1.0.\n\n\"s_noise_substep\" is not compatible with BONGMath. You will get a terrible image if you use them together.\n\n\"lying\" is equivalent to the popular \"lying sigmas\" approach. Like \"noise_anchor\", values < 1.0 will increase the \"dirty\" look. Try starting with 0.95.\n\n\"lying_inv\" will do the opposite of \"lying\". If you find your images look \"dried out\" or desaturated when using lying, try setting this to a similar value, and have it start at a later step, as shown below."],"color":"#432","bgcolor":"#653"},{"id":760,"type":"ClownOptions_SigmaScaling_Beta","pos":[3912.718017578125,3147.32080078125],"size":[272.21429443359375,242],"flags":{},"order":97,"mode":0,"inputs":[{"name":"s_noises","localized_name":"s_noises","type":"SIGMAS","shape":7,"link":null},{"name":"s_noises_substep","localized_name":"s_noises_substep","type":"SIGMAS","shape":7,"link":null},{"name":"options","localized_name":"options","type":"OPTIONS","shape":7,"link":null}],"outputs":[{"name":"options","localized_name":"options","type":"OPTIONS","links":[1990],"slot_index":0}],"properties":{"Node name for S&R":"ClownOptions_SigmaScaling_Beta"},"widgets_values":[1,1,1,0.9500000000000001,0.9500000000000001,2,8]},{"id":763,"type":"ClownOptions_DetailBoost_Beta","pos":[3423.42919921875,3797.075439453125],"size":[308.5726623535156,218],"flags":{},"order":98,"mode":0,"inputs":[{"name":"weights","localized_name":"weights","type":"SIGMAS","shape":7,"link":null},{"name":"etas","localized_name":"etas","type":"SIGMAS","shape":7,"link":null},{"name":"options","localized_name":"options","type":"OPTIONS","shape":7,"link":null}],"outputs":[{"name":"options","localized_name":"options","type":"OPTIONS","links":[1991],"slot_index":0}],"properties":{"Node name for S&R":"ClownOptions_DetailBoost_Beta"},"widgets_values":[1,"model","hard",0.5,3,10]},{"id":675,"type":"Note","pos":[2902.40869140625,3789.681640625],"size":[468.7909851074219,245.46542358398438],"flags":{},"order":99,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["ClownOptions_DetailBoost aims to BREAK the noise scaling math that was so carefully prepared by ClownOptions_SDE.\n\nTry experimenting with different methods: ones that end with \"normal\" will attempt to preserve luminosity in the image after the adjustments to the noise are made.\n\nIt is worth trying \"sinusoidal\" mode as well, as this is designed to be strongest at middle steps.\n\nEta will increase the intensity of the effect. \n\nIt seems to be best to not have this start on the first step (step 0), and to have it end no more than halfway (end_step = 1/2 of total steps or less). With method = \"model\", this seems to add a lot of detail without losing saturation, increasing luminosity, or triggering mutations."],"color":"#432","bgcolor":"#653"},{"id":671,"type":"Note","pos":[3826.36474609375,4914.162109375],"size":[363.5062255859375,260.6607971191406],"flags":{},"order":100,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["This node can be used to visualize the effect of different noise parameters on how much noise is actually added (or removed) during the sampling process.\n\nDelta (Δ) signifies change. So for example, Δt = step size.\n\nThe most important thing to look at is the original sigma (σ) schedule vs σup. \n\nThe difference between σ (white line) and σup (red line above) is how much noise is added by the sampler after each step. If the two overlap, you aren't adding noise, and it's in ODE mode (eta = 0.0).\n\nThe most important thing to try here is higher or lower eta values, and different noise_modes. Try comparing \"hard\" vs \"soft\" vs \"hard_var\" with eta = 0.5."],"color":"#432","bgcolor":"#653"},{"id":678,"type":"Note","pos":[3784.066650390625,4181.28466796875],"size":[255.7506866455078,93.64720916748047],"flags":{},"order":101,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Tip: if your results are too noisy, try setting \"overshoot\" to the same value as \"eta\" used in ClownOptions_SDE! (Default is 0.5)."],"color":"#432","bgcolor":"#653"},{"id":717,"type":"Note","pos":[3781.68505859375,4456.7880859375],"size":[280.0735168457031,88],"flags":{},"order":102,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["INPAINTING TIP: Implicit steps can really help, especially with seams! They also can have a significant impact on unsampling, and guides in general."],"color":"#432","bgcolor":"#653"},{"id":676,"type":"ClownOptions_StepSize_Beta","pos":[3425.103515625,4152.25439453125],"size":[316.0789794921875,130],"flags":{},"order":103,"mode":0,"inputs":[{"name":"options","localized_name":"options","type":"OPTIONS","shape":7,"link":null}],"outputs":[{"name":"options","localized_name":"options","type":"OPTIONS","links":[1968],"slot_index":0}],"properties":{"Node name for S&R":"ClownOptions_StepSize_Beta"},"widgets_values":["hard","hard",0,0]},{"id":647,"type":"Note","pos":[1321.257080078125,3860],"size":[288.0400390625,88],"flags":{},"order":104,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Runs the first 7 steps (out of 30)."],"color":"#432","bgcolor":"#653"},{"id":640,"type":"ClownsharKSampler_Beta","pos":[1321.257080078125,4010],"size":[296.93646240234375,418],"flags":{},"order":105,"mode":0,"inputs":[{"name":"model","localized_name":"model","type":"MODEL","shape":7,"link":null},{"name":"positive","localized_name":"positive","type":"CONDITIONING","shape":7,"link":null},{"name":"negative","localized_name":"negative","type":"CONDITIONING","shape":7,"link":null},{"name":"latent_image","localized_name":"latent_image","type":"LATENT","shape":7,"link":null},{"name":"sigmas","localized_name":"sigmas","type":"SIGMAS","shape":7,"link":null},{"name":"guides","localized_name":"guides","type":"GUIDES","shape":7,"link":null},{"name":"options","localized_name":"options","type":"OPTIONS","shape":7,"link":null}],"outputs":[{"name":"output","localized_name":"output","type":"LATENT","links":[1952],"slot_index":0},{"name":"denoised","localized_name":"denoised","type":"LATENT","links":null},{"name":"options","localized_name":"options","type":"OPTIONS","links":null}],"properties":{"Node name for S&R":"ClownsharKSampler_Beta"},"widgets_values":[0.5,"exponential/res_3s","beta57",30,7,1,5.5,0,"fixed","standard",true]},{"id":641,"type":"ClownsharKSampler_Beta","pos":[1671.257080078125,4010],"size":[288.4732666015625,418],"flags":{},"order":121,"mode":0,"inputs":[{"name":"model","localized_name":"model","type":"MODEL","shape":7,"link":null},{"name":"positive","localized_name":"positive","type":"CONDITIONING","shape":7,"link":null},{"name":"negative","localized_name":"negative","type":"CONDITIONING","shape":7,"link":null},{"name":"latent_image","localized_name":"latent_image","type":"LATENT","shape":7,"link":1952},{"name":"sigmas","localized_name":"sigmas","type":"SIGMAS","shape":7,"link":null},{"name":"guides","localized_name":"guides","type":"GUIDES","shape":7,"link":null},{"name":"options","localized_name":"options","type":"OPTIONS","shape":7,"link":null}],"outputs":[{"name":"output","localized_name":"output","type":"LATENT","links":[1953],"slot_index":0},{"name":"denoised","localized_name":"denoised","type":"LATENT","links":null},{"name":"options","localized_name":"options","type":"OPTIONS","links":null}],"properties":{"Node name for S&R":"ClownsharKSampler_Beta"},"widgets_values":[0.5,"exponential/res_3s","beta57",30,10,1,5.5,-1,"fixed","resample",true]},{"id":642,"type":"ClownsharKSampler_Beta","pos":[2021.257080078125,4010],"size":[291.5506286621094,422.6160888671875],"flags":{},"order":127,"mode":0,"inputs":[{"name":"model","localized_name":"model","type":"MODEL","shape":7,"link":null},{"name":"positive","localized_name":"positive","type":"CONDITIONING","shape":7,"link":null},{"name":"negative","localized_name":"negative","type":"CONDITIONING","shape":7,"link":null},{"name":"latent_image","localized_name":"latent_image","type":"LATENT","shape":7,"link":1953},{"name":"sigmas","localized_name":"sigmas","type":"SIGMAS","shape":7,"link":null},{"name":"guides","localized_name":"guides","type":"GUIDES","shape":7,"link":null},{"name":"options","localized_name":"options","type":"OPTIONS","shape":7,"link":null}],"outputs":[{"name":"output","localized_name":"output","type":"LATENT","links":[],"slot_index":0},{"name":"denoised","localized_name":"denoised","type":"LATENT","links":null},{"name":"options","localized_name":"options","type":"OPTIONS","links":null}],"properties":{"Node name for S&R":"ClownsharKSampler_Beta"},"widgets_values":[0.5,"exponential/res_3s","beta57",30,-1,1,5.5,-1,"fixed","resample",true]},{"id":728,"type":"Note","pos":[1311.5924072265625,4784.7666015625],"size":[210,88],"flags":{},"order":106,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["        UNSAMPLER NODE"],"color":"#432","bgcolor":"#653"},{"id":729,"type":"Note","pos":[1666.1065673828125,4786.38134765625],"size":[210,88],"flags":{},"order":107,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["        RESAMPLER NODE"],"color":"#432","bgcolor":"#653"},{"id":650,"type":"Note","pos":[1771.257080078125,4480],"size":[453.94183349609375,144.25192260742188],"flags":{},"order":108,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["IMPORTANT: sampler_mode is set to \"resample\"!\n\nALSO: seed is set to -1!\n\nThis means \"continue where the last sampler left off\", as in, use the next available unused seed.\n\nIf you set it to another value, the noise sampler that is used at every step might reuse a seed, which can cause the image to burn.\n\n"],"color":"#432","bgcolor":"#653"},{"id":732,"type":"Note","pos":[1990,5010],"size":[352.0077819824219,88],"flags":{},"order":109,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Tip: multistep samplers usually adhere to unsampled images more effectively than others."],"color":"#432","bgcolor":"#653"},{"id":764,"type":"Note","pos":[1871.069091796875,2726.40576171875],"size":[433.063232421875,101.85264587402344],"flags":{},"order":110,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["NOTE: The samplers available in the \"beta\" nodes are NOT the same as the ones that currently show up in KSampler in the sampler_name dropdown! Those are the old versions in the current \"main\" ClownSampler. These will soon change."],"color":"#432","bgcolor":"#653"}],"links":[[1365,453,0,454,0,"IMAGE"],[1890,584,0,606,0,"MODEL"],[1904,606,0,601,0,"MODEL"],[1907,598,0,610,1,"CONDITIONING"],[1908,599,0,610,2,"CONDITIONING"],[1909,601,0,610,0,"MODEL"],[1910,601,0,612,0,"MODEL"],[1911,598,0,612,1,"CONDITIONING"],[1912,599,0,612,2,"CONDITIONING"],[1914,598,0,613,1,"CONDITIONING"],[1915,599,0,613,2,"CONDITIONING"],[1923,613,0,453,0,"LATENT"],[1926,609,0,613,0,"MODEL"],[1937,606,1,598,0,"CLIP"],[1938,606,1,599,0,"CLIP"],[1939,620,0,606,1,"CLIP"],[1940,621,0,453,1,"VAE"],[1947,624,0,612,6,"OPTIONS"],[1948,625,0,613,6,"OPTIONS"],[1949,610,0,612,3,"LATENT"],[1950,612,0,613,3,"LATENT"],[1951,626,0,610,6,"OPTIONS"],[1952,640,0,641,3,"LATENT"],[1953,641,0,642,3,"LATENT"],[1962,666,0,660,6,"OPTIONS"],[1963,661,0,660,7,"OPTIONS"],[1968,676,0,660,9,"OPTIONS"],[1971,662,0,660,10,"OPTIONS"],[1972,665,0,660,11,"OPTIONS"],[1973,680,0,679,3,"SAMPLER"],[1974,682,0,660,12,"OPTIONS"],[1975,684,0,682,0,"SIGMAS"],[1976,684,0,686,0,"SIGMAS"],[1977,688,0,691,5,"GUIDES"],[1978,693,0,692,0,"MODEL"],[1979,692,0,694,0,"MODEL"],[1980,694,0,695,0,"MODEL"],[1982,724,0,720,1,"CONDITIONING"],[1983,724,0,720,2,"CONDITIONING"],[1984,722,0,720,5,"GUIDES"],[1985,723,0,721,5,"GUIDES"],[1986,751,0,752,2,"MASK"],[1987,753,0,752,3,"MASK"],[1988,756,0,754,2,"MASK"],[1989,757,0,754,3,"MASK"],[1990,760,0,660,13,"OPTIONS"],[1991,763,0,660,8,"OPTIONS"]],"groups":[{"id":1,"title":"UNSAMPLING SETUP","bounding":[727.6610717773438,4702.3486328125,1679.59423828125,1066.484619140625],"color":"#3f789e","font_size":24,"flags":{}},{"id":2,"title":"CHAINED SAMPLER SETUP","bounding":[726.7158203125,3763.15576171875,1680.4798583984375,894.4533081054688],"color":"#3f789e","font_size":24,"flags":{}},{"id":3,"title":"INTRODUCTION TO CLOWNSAMPLING","bounding":[603.1690063476562,2607.28857421875,1861.1392822265625,945.0753173828125],"color":"#3f789e","font_size":24,"flags":{}},{"id":5,"title":"OPTIONS AND AUTOMATION","bounding":[2599.417236328125,2632.92578125,1724.455078125,3136.83154296875],"color":"#3f789e","font_size":24,"flags":{}},{"id":6,"title":"GUIDES","bounding":[4494.4521484375,3692.791259765625,1759.74560546875,1490.4798583984375],"color":"#3f789e","font_size":24,"flags":{}},{"id":7,"title":"LOADERS AND PATCHERS","bounding":[4493.74365234375,2642.16259765625,1755.80859375,885.739990234375],"color":"#3f789e","font_size":24,"flags":{}},{"id":8,"title":"ULTRACASCADE","bounding":[-3341.39892578125,2604.916748046875,3831.125244140625,1936.0570068359375],"color":"#3f789e","font_size":24,"flags":{}},{"id":9,"title":"REGIONAL CONDITIONING","bounding":[6335.28125,3695.2412109375,1882.3206787109375,1483.911376953125],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":1,"offset":[3376.871419039379,-2220.358387325032]},"VHS_latentpreview":false,"VHS_latentpreviewrate":0},"version":0.4}